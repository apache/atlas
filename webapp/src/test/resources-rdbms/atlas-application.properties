#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

#########  Atlas Server Configs #########
atlas.rest.address=http://localhost:31000

#########  Graph Database Configs  #########
atlas.graph.index.search.solr.wait-searcher=true

# Graph database implementation.  Value inserted by maven.
atlas.graphdb.backend=org.apache.atlas.repository.graphdb.janus.AtlasJanusGraphDatabase

#
# RDBMS (Postgres) backend for JanusGraph
#
atlas.graph.storage.backend=rdbms

# JDBC/Hikari settings (override these in CI if needed)
atlas.graph.storage.rdbms.jpa.hikari.driverClassName=org.postgresql.Driver
atlas.graph.storage.rdbms.jpa.hikari.jdbcUrl=${it.rdbms.jdbcUrl}
atlas.graph.storage.rdbms.jpa.hikari.username=${it.rdbms.username}
atlas.graph.storage.rdbms.jpa.hikari.password=${it.rdbms.password}
atlas.graph.storage.rdbms.jpa.hikari.maximumPoolSize=40
atlas.graph.storage.rdbms.jpa.hikari.minimumIdle=5
atlas.graph.storage.rdbms.jpa.hikari.connectionTestQuery=select 1
atlas.graph.storage.rdbms.jpa.hikari.connectionTimeout=60000
atlas.graph.storage.rdbms.jpa.hikari.idleTimeout=300000
atlas.graph.storage.rdbms.jpa.hikari.maxLifetime=1800000
atlas.graph.storage.rdbms.jpa.hikari.leakDetectionThreshold=60000

# JPA schema init for JanusGraph RDBMS store
atlas.graph.storage.rdbms.jpa.javax.persistence.jdbc.dialect=org.eclipse.persistence.platform.database.PostgreSQLPlatform
atlas.graph.storage.rdbms.jpa.javax.persistence.schema-generation.database.action=create
atlas.graph.storage.rdbms.jpa.javax.persistence.schema-generation.create-database-schemas=true
atlas.graph.storage.rdbms.jpa.javax.persistence.schema-generation.create-source=script
atlas.graph.storage.rdbms.jpa.javax.persistence.schema-generation.create-script-source=META-INF/postgres/create_schema.sql

# Entity audit repository for ITs (avoid HBase audit dependency)
# NOTE: RdbmsBasedAuditRepository currently doesn't implement V1 audit event writes used by ITs.
atlas.EntityAuditRepository.impl=org.apache.atlas.repository.audit.InMemoryEntityAuditRepository

# Graph Search Index Backend
atlas.graph.index.search.backend=solr

# Solr cloud mode properties
atlas.graph.index.search.solr.mode=cloud
atlas.graph.index.search.solr.zookeeper-url=${solr.zk.address}
atlas.graph.index.search.solr.embedded=true
atlas.graph.index.search.max-result-set-size=150

#########  Notification Configs  #########
atlas.notification.embedded=true
atlas.notification.entity.version=v1

atlas.kafka.zookeeper.connect=localhost:19026
atlas.kafka.bootstrap.servers=localhost:19027
atlas.kafka.data=${sys:atlas.data}/kafka
atlas.kafka.zookeeper.session.timeout.ms=4000
atlas.kafka.zookeeper.sync.time.ms=20
atlas.kafka.consumer.timeout.ms=4000
atlas.kafka.auto.commit.interval.ms=100
atlas.kafka.hook.group.id=atlas
atlas.kafka.entities.group.id=atlas_entities

atlas.kafka.enable.auto.commit=false
atlas.kafka.auto.offset.reset=earliest
atlas.kafka.session.timeout.ms=30000
atlas.kafka.offsets.topic.replication.factor=1

#########  Entity Audit Configs  #########
atlas.audit.hbase.tablename=ATLAS_ENTITY_AUDIT_EVENTS
atlas.audit.zookeeper.session.timeout.ms=1000
atlas.audit.hbase.zookeeper.quorum=localhost
atlas.audit.hbase.zookeeper.property.clientPort=19026

#########  Security Properties  #########

# SSL config
atlas.enableTLS=false
atlas.server.https.port=31443

#########  Security Properties  #########

hbase.security.authentication=simple

atlas.hook.falcon.synchronous=true

#########  JAAS Configuration ########

atlas.jaas.KafkaClient.loginModuleName = com.sun.security.auth.module.Krb5LoginModule
atlas.jaas.KafkaClient.loginModuleControlFlag = required
atlas.jaas.KafkaClient.option.useKeyTab = true
atlas.jaas.KafkaClient.option.storeKey = true
atlas.jaas.KafkaClient.option.serviceName = kafka
atlas.jaas.KafkaClient.option.keyTab = /etc/security/keytabs/atlas.service.keytab
atlas.jaas.KafkaClient.option.principal = atlas/_HOST@EXAMPLE.COM

#########  High Availability Configuration ########
atlas.server.ha.enabled=false

######### Atlas Authorization #########
atlas.authorizer.impl=none

######### Atlas Authentication #########
atlas.authentication.method.file=true
atlas.authentication.method.ldap.type=none
atlas.authentication.method.kerberos=false

#########  Gremlin Search Configuration  #########
# Set to false to disable gremlin search.
atlas.search.gremlin.enable=true

#########  Configure use of Tasks  #########
atlas.tasks.enabled=false
atlas.debug.metrics.enabled=true

#########  Configure on-demand lineage  #########
atlas.lineage.on.demand.enabled=true


